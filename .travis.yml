language:
  - objective-c

compiler:
  - gcc

before_install:
  - sudo pip install pep8 pandas
  - sudo easy_install --upgrade numpy

install:
  - ./codestyle_checks.sh
  - mkdir build
  - pushd build && cmake .. && make -j && popd
  - cp build/3rdparty/protobuf-cmake/protoc/protoc 3rdparty/protobuf/src/
  - pushd 3rdparty/protobuf/python && python setup.py build && sudo python setup.py install && popd

before_script:
  - pushd python/examples && ./download_datasets.sh && popd

script:
  - export PYTHONPATH=`pwd`/python:$PYTHONPATH
  - export ARTM_SHARED_LIBRARY=`pwd`/build/src/artm/libartm.dylib
  - pushd build/src/artm_tests && ./artm_tests && popd
  - pushd python/tests && python tests.py && popd
  - pushd python/examples && for f in *.py ; do echo "==== $f ====" && python "$f" ; done && popd
