sudo: false

language:
  - python
  - cpp

compiler:
  - clang
  - gcc

python:
  - "2.7"

virtualenv:
  system_site_packages: true

addons:
  apt:
    packages:
      - cmake
      - libboost-all-dev
      - python-numpy
      - python-pandas
      - python-virtualenv

before_install:
  - pip install pep8
  - pip install -U pytest

install:
  - ./codestyle_checks.sh
  - mkdir build
  - pushd build && cmake .. && make && make install && file /usr/local/bin/bigartm && popd

before_script:
  - pushd python/tests/wrapper && ./download_datasets.sh && popd

script:
  - export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH
  - pushd build/src/artm_tests && ./artm_tests && popd
  - pushd python/tests/wrapper && py.test && popd
